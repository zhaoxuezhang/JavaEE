<html>
<head>
  <title>视图解析器</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/601935 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="842"/>
<h1>视图解析器</h1>

<div>
<span><div><div><span style="font-size: 16pt;">SpringMVC视图解析</span></div><div><span style="font-size: 16pt;">1、方法执行后的返回值会作为页面地址参考，转发或者重定向到页面</span></div><div><span style="font-size: 16pt;">２、视图解析器可能会进行页面地址的拼串；</span></div><hr/><div><font style="font-size: 16pt;">视图解析的流程：</font></div><div><font style="font-size: 16pt;">１.任何方法的返回值，最终都会被包装成ModelAndView对象</font></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image.png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">2、</span><span style="font-size: 16pt;"><img src="视图解析器_files/Image [1].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [2].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">视图渲染流程：将域中的数据在页面展示；页面就是用来渲染模型数据的；</span></div><div><span style="font-size: 16pt;">3、</span><span style="font-size: 16pt;"><img src="视图解析器_files/Image [3].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">4、view和viewResolver</span></div><div><span style="font-size: 16pt;">     </span><span style="font-size: 16pt;">viewResolver的作用是根据视图名（方法的返回值）得到View对象。</span></div><div><span style="font-size: 16pt;">      <img src="视图解析器_files/Image [4].png" type="image/png" data-filename="Image.png" width="272"/></span></div><div><span style="font-size: 16pt;">5、怎么根据视图名得到View对象的</span></div><div><span style="font-size: 16pt;">（1）视图解析器得到View对象的流程就是，所有配置的视图解析器都来尝试根据视图名得到View对象；如果得到就返回，得不到换下一个视图解析器。</span></div><div><span style="font-size: 16pt;">（2）调用View对象的Render方法</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [5].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">所有数据都在隐含模型中。</span></div><div><span style="font-size: 16pt;"><font style="color: rgb(227, 0, 0);">internalresourceView的方法renderMergedOutputModel();</font></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [6].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">拿到转发器</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [7].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">转发操作</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [8].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [9].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [10].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [11].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">进入resolveViewName()方法：具体实现细节</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [12].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">进入createView方法：创建View对象</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [13].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [14].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [15].png" type="image/png" data-filename="Image.png" width="935"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [16].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">解析后得到两种view：一种是internalresourceview另一种是redirectview</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [17].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">一句话：</span></div><div><span style="font-size: 16pt;">视图解析器只是为了得到视图对象，视图对象才能真正的转发（将模型数据全部放在请求域中）或者重定向到页面。<font style="color: rgb(227, 0, 0);">从而渲染模型数据。</font></span></div><hr/><div style="min-height: 16pt; text-align: left;"><font style="font-size: 16pt;">发送一个请求，直接到指定页面，</font></div><div style="min-height: 16pt; text-align: left;"><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 95, 191); font-size: 14.0pt;">&lt;!-- 定义无Controller的path&lt;-&gt;view直接映射 --&gt;</span></div><div style="min-height: 16pt; text-align: left;"><span style="min-height: 16pt; font-family: Consolas; font-size: 14.0pt;">     </span><span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 128, 128); font-size: 14.0pt;">&lt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 127, 127); font-size: 14.0pt;">mvc:view-controller</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 127); font-size: 14.0pt;">path</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14.0pt;">=</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 14.0pt; font-style: italic;">&quot;/&quot;</span> <span style="min-height: 16pt; font-family: Consolas; color: rgb(127, 0, 127); font-size: 14.0pt;">view-name</span><span style="min-height: 16pt; font-family: Consolas; font-size: 14.0pt;">=</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(42, 0, 255); font-size: 14.0pt; font-style: italic;">&quot;redirect:${web.view.index}&quot;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 128, 128); font-size: 14.0pt;">/&gt;</span></div><div><span style="font-size: 16pt;">但是其他请求不能用了，解决方法是：开启MVC注解驱动模式</span></div><div><span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 128, 128); font-size: 14.0pt; background: #e8f2fe;">&lt;</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 127, 127); font-size: 14.0pt; background: #e8f2fe;">mvc:annotation-driven</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(1, 1, 1); font-size: 14.0pt; background: #e8f2fe;"> &gt; </span><span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 128, 128); font-size: 14.0pt; background: #e8f2fe;">&lt;/</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(63, 127, 127); font-size: 14.0pt; background: #e8f2fe;">mvc:annotation-driven</span><span style="min-height: 16pt; font-family: Consolas; color: rgb(0, 128, 128); font-size: 14.0pt; background: #e8f2fe;">&gt;</span></div><div><span style="font-size: 16pt;"><br/></span></div><hr/><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [18].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [19].png" type="image/png" data-filename="Image.png"/></span></div><div><span style="font-size: 16pt;">改变视图解析器的优先级，需要实现Ordered接口，SpringMVC默认优先级最低，（数字越大优先级越低）。</span></div><div><span style="font-size: 16pt;"><img src="视图解析器_files/Image [20].png" type="image/png" data-filename="Image.png"/></span></div><hr/><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div><div><span style="font-size: 16pt;"><br/></span></div></div></span>
</div></body></html> 